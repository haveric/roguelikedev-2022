"use strict";(self.webpackChunkroguelikedev_2022=self.webpackChunkroguelikedev_2022||[]).push([[143],{890:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(537),r=s.n(n),o=s(645),a=s.n(o)()(r());a.push([e.id,"* {\n    box-sizing: border-box;\n}\n\nbody {\n    margin: 0 auto;\n    overflow: hidden;\n    width: 100vw;\n    height: 100vh;\n    font-size: 1.2vh;\n}","",{version:3,sources:["webpack://./src/styles/style.css"],names:[],mappings:"AAAA;IACI,sBAAsB;AAC1B;;AAEA;IACI,cAAc;IACd,gBAAgB;IAChB,YAAY;IACZ,aAAa;IACb,gBAAgB;AACpB",sourcesContent:["* {\n    box-sizing: border-box;\n}\n\nbody {\n    margin: 0 auto;\n    overflow: hidden;\n    width: 100vw;\n    height: 100vh;\n    font-size: 1.2vh;\n}"],sourceRoot:""}]);const i=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(a[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);n&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),s&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=s):l[2]=s),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),t.push(l))}},t}},537:e=>{e.exports=function(e){var t=e[1],s=e[3];if(!s)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),o="/*# ".concat(r," */"),a=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[t].concat(a).concat([o]).join("\n")}return[t].join("\n")}},379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var o={},a=[],i=0;i<e.length;i++){var c=e[i],d=n.base?c[0]+n.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var h=s(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=r(p,n);n.byIndex=i,t.splice(i,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function r(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var i=s(o[a]);t[i].references--}for(var c=n(e,r),d=0;d<o.length;d++){var l=s(o[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=c}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,r&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},67:(e,t,s)=>{var n=s(379),r=s.n(n),o=s(795),a=s.n(o),i=s(569),c=s.n(i),d=s(565),l=s.n(d),u=s(216),h=s.n(u),p=s(589),f=s.n(p),w=s(890),m={};m.styleTagTransform=f(),m.setAttributes=l(),m.insert=c().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=h(),r()(w.Z,m),w.Z&&w.Z.locals&&w.Z.locals;class v{constructor(e){this.entity=e}perform(){console.error("Not Implemented")}isPlayer(){return this.entity===k.player}}class y extends v{constructor(e){super(e)}perform(){return this}}class g extends v{constructor(e,t){super(e),this.reason=t}perform(){return this}}const x=new class{constructor(){this.eventHandler=null,this.player=null,this.gameMap=null,this.needsRenderUpdate=!1}handleEvents(){this.processAction(this.eventHandler.handleInput())}processAction(e){if(e&&this.eventHandler.isPlayerTurn){const t=e.perform();return!(t instanceof y||(t instanceof g?(t.reason&&console.log(t.reason),1):(x.needsRenderUpdate=!0,this.handleEnemyTurns(),0)))}}handleEnemyTurns(){}},k=x,b=new class{constructor(){this.setupGameHtml(),this.resizeCanvas(),window.addEventListener("resize",this)}setupGameHtml(){const e=document.createElement("div");e.classList.add("game"),this.canvas=document.createElement("canvas"),this.canvas.classList.add("view"),e.appendChild(this.canvas),document.body.appendChild(e),this.ctx=this.canvas.getContext("2d")}handleEvent(e){"resize"===e.type&&this.resizeCanvas()}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,k.needsRenderUpdate=!0}clearAll(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},A=2*Math.PI/6;class M{constructor(e,t){this.q=e,this.r=t,this.s=-e-t}static add(e,t){return new M(e.q+t.q,e.r+t.r)}static subtract(e,t){return new M(e.q-t.q,e.r-t.r)}static multiply(e,t){return new M(e.q*t,e.r*t)}getDisplayX(){return this.q+this.r/2}getX(){return Math.floor(this.q+this.r/2)}getY(){return this.r}static hexToArray(e,t){return{x:Math.floor(e+t/2),y:t}}draw(e,t){b.ctx.beginPath();for(let s=0;s<6;s++)b.ctx.lineTo(e+50*Math.cos(A*s),t+50*Math.sin(A*s));b.ctx.closePath(),b.ctx.stroke(),b.ctx.textAlign="center",b.ctx.textBaseline="middle",b.ctx.font="18px serif",b.ctx.fillStyle="black",b.ctx.fillText("("+this.q+", "+this.r+")",e,t-10);const s=M.hexToArray(this.q,this.r);b.ctx.fillText("("+s.x+", "+s.y+")",e,t+10)}}const E=2*Math.PI/6;class N{constructor(e,t){this.rows=e,this.cols=t,this.actors=[],this.init()}init(){this.hexes=[];for(let e=0;e<this.rows;e++){this.hexes[e]=[];for(let t=0;t<this.cols;t++)this.hexes[e][t]=new M(e-Math.floor(t/2),t)}}isInBounds(e,t){return 0<=e&&e<this.rows&&0<=t&&t<this.cols}draw(){for(let e=0;e<this.rows;e++){let t=100+100*Math.sin(E)*e;for(let s=0;s<this.cols;s++){const n=50+50*(1+Math.cos(E))*s;t-=(-1)**s*50*Math.sin(E),this.hexes[e][s].draw(n,t)}}for(const e of this.actors)e.draw()}}const C=2*Math.PI/6;class L extends class{constructor(){}draw(){}}{constructor(){super(),this.hex=new M(0,10)}draw(){const e=50+50*(1+Math.cos(C))*this.hex.getY(),t=1.15*50+100*Math.sin(C)*this.hex.getDisplayX();b.ctx.beginPath();for(let s=0;s<6;s++)b.ctx.lineTo(e+50*Math.cos(C*s),t+50*Math.sin(C*s));b.ctx.closePath(),b.ctx.fillStyle="blue",b.ctx.fill(),b.ctx.fillStyle="white",b.ctx.textAlign="center",b.ctx.textBaseline="middle",b.ctx.font="26px serif",b.ctx.fillText("@",e,t)}}const D="ArrowUp",I="ArrowDown",S="Left Shift",P="Right Shift",T="Numpad .",q="Numpad 0",R="Numpad 1",U="Numpad 2",B="Numpad 3",H="Numpad 4",z="Numpad 5",K="Numpad 6",W="Numpad 7",Z="Numpad 8",j="Numpad 9",Y="Numpad Delete",F="Numpad Insert",J="Numpad End",O="Numpad ArrowDown",X="Numpad PageDown",G="Numpad ArrowLeft",_="Numpad Clear",Q="Numpad ArrowRight",V="Numpad Home",$="Numpad ArrowUp",ee="Numpad PageUp",te=new class{constructor(){const e=this;e.defaultDelay=25,e.lastShiftUp=null,e.treatShiftNumpadEqual=!0,e.keysDown=[],e.keysDelayed=[],e.defaults=new Map,e.controls=new Map,e.defaults.set("up",[Z,D]),e.defaults.set("down",[U,I]),e.defaults.set("nw",[W]),e.defaults.set("ne",[j]),e.defaults.set("sw",[R]),e.defaults.set("se",[B]),e.defaults.set("wait",[z]),e.load(),addEventListener("keydown",(function(t){"/"===t.key&&t.preventDefault(),e.treatShiftNumpadEqual&&t.getModifierState("NumLock")&&!t.shiftKey&&t.code.startsWith("Numpad")&&t.keyCode<90&&e.lastShiftUp&&(e.keysDown[e.lastShiftUp]=!0);const s=e.getKey(t.key,t.code);e.keysDown[s]=!0}),!1),addEventListener("keyup",(function(t){const s=e.getKey(t.key,t.code);s!==S&&s!==P||(e.lastShiftUp=s),delete e.keysDown[s],delete e.keysDelayed[s]}),!1)}getKey(e,t){if(t.startsWith("Arrow")||(t.endsWith("Left")?e="Left "+e:t.endsWith("Right")?e="Right "+e:t.startsWith("Numpad")&&(e="Numpad "+e)),this.treatShiftNumpadEqual)switch(e){case Y:e=T;break;case F:e=q;break;case J:e=R;break;case O:e=U;break;case X:e=B;break;case G:e=H;break;case _:e=z;break;case Q:e=K;break;case V:e=W;break;case $:e=Z;break;case ee:e=j}return e}load(){const e=localStorage.getItem("controls");e?this.controls=new Map(JSON.parse(e)):this.resetToDefault()}save(){localStorage.setItem("controls",JSON.stringify(Array.from(this.controls.entries())))}setControls(e){this.controls=new Map;for(const[t,s]of e.entries()){const e=[];for(const t of s)e.push(t);this.controls.set(t,e)}this.save()}resetToDefault(){this.setControls(this.defaults)}clone(){const e=new Map;for(const[t,s]of this.controls.entries()){const n=[];for(const e of s)n.push(e);e.set(t,n)}return e}isPressed(e){const t=this;let s=!1,n=t.controls.get(e);if(!n){const s=t.defaults.get(e);s?(t.controls.set(e,s),t.save(),n=s):console.error("Missing keybindings for: ",e,n)}return n.forEach((function(e){e in t.keysDown&&(s=!0)})),s}isDelayed(e){const t=this;let s=!1;return this.controls.get(e).forEach((function(e){e in t.keysDelayed&&(s=!0)})),s}deleteKey(e,t){const s=this;s.controls.get(e).forEach((function(e){delete s.keysDown[e],t&&(s.keysDelayed[e]=!0)})),t&&setTimeout((function(){s.controls.get(e).forEach((function(e){delete s.keysDelayed[e]}))}),t)}testPressed(e,t){t=t||this.defaultDelay;const s=this;let n=!1;return s.isPressed(e)&&!s.isDelayed(e)&&(s.deleteKey(e,t),n=!0),n}};class se extends v{constructor(e,t=0,s=0){super(e),this.dq=t,this.dr=s}perform(){console.error("Not Implemented")}}class ne extends se{constructor(e,t,s){super(e,t,s)}perform(){if(this.entity.hex){const e=M.add(this.entity.hex,new M(this.dq,this.dr));if(!k.gameMap.isInBounds(e.getX(),e.getY()))return new g(this.entity,"Location is outside of the map!");this.entity.hex.q+=this.dq,this.entity.hex.r+=this.dr}return this}}class re extends class{constructor(){this.mouseDown=!1,window.addEventListener("mousemove",this),window.addEventListener("mousedown",this),window.addEventListener("mouseup",this),window.addEventListener("click",this),window.addEventListener("contextmenu",this),window.addEventListener("change",this),window.addEventListener("keydown",this),this.isPlayerTurn=!0}teardown(){window.removeEventListener("mousemove",this),window.removeEventListener("mousedown",this),window.removeEventListener("mouseup",this),window.removeEventListener("click",this),window.removeEventListener("contextmenu",this),window.removeEventListener("change",this),window.removeEventListener("keydown",this)}handleEvent(e){switch(e.type){case"mousemove":this.onMouseMove(e);break;case"mousedown":this.onMouseDown(e);break;case"mouseup":this.onMouseUp(e);break;case"click":this.onLeftClick(e);break;case"contextmenu":this.onRightClick(e);break;case"change":this.onChange(e);break;case"keydown":this.onKeydown(e)}}handleInput(){}onMouseMove(){}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onLeftClick(){}onRightClick(){}onChange(){}onKeydown(){}}{constructor(){super()}teardown(){super.teardown()}handleInput(){let e=null;return this.isPlayerTurn&&(te.testPressed("up")?e=new ne(k.player,-1,0):te.testPressed("down")?e=new ne(k.player,1,0):te.testPressed("nw")?e=new ne(k.player,0,-1):te.testPressed("ne")?e=new ne(k.player,-1,1):te.testPressed("sw")?e=new ne(k.player,1,-1):te.testPressed("se")&&(e=new ne(k.player,0,1))),e}}k.gameMap=new N(10,20),k.player=new L,k.gameMap.actors.push(k.player),k.eventHandler=new re,k.needsRenderUpdate=!0,window.requestAnimationFrame((function e(){k.handleEvents(),k.needsRenderUpdate&&(b.clearAll(),k.gameMap.draw(),k.needsRenderUpdate=!1),window.requestAnimationFrame(e)}))}},e=>{e(e.s=67)}]);
//# sourceMappingURL=app.9e1928bd3bd45111d170.js.map